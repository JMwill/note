# 第二部分

## shell 环境

接触到的命令：

- printenv 打印部分或全部环境变量
- set 设置 shell 选项
- export 导出环境变量，给随后执行的程序使用
- alias 创建命令别名

### printenv

单独的 `printenv` 会打印所有的环境变量，用变量名作为参数则打印对应的变量存储的值 `printenv USER`

### set

`set` 不带参数以及选项时会输出 shell 变量，环境变量和定义的 shell 函数。

### shell 环境

登录 shell 会话的启动文件（按先后顺序）

- `/etc/profile` 应用于所有用户的 **全局配置脚本**
- `~/.bash_profile` 个人配置
- `~/.bash_login` 上一个找不到就找这个
- `/.profile` 上两个找不到就找这个，多见于类 Debian 系统

非登录 shell 会话会读取以下启动文件

- `/etc/bash.bashrc` 应用于所有用户的全局配置文件
- `~/.bashrc` 用户个人启动文件

## 自定义 shell 提示符

shell 提示符中的转义字符

- `\d` 以日、月、天的格式显示当前日期。“Mon May 26“
- `\h` 本地主机名，不带末尾的域名
- `\H` 完整主机名
- `\j` 当前 shell 会话中的工作数
- `\l` 当前终端设备名
- `\n` `\r` 换行和回车
- `\s` shell 程序名
- `\t` 24 小时制，`hours:minutes:seconds` 格式的当前时间
- `\T` 12 小时制
- `\@` 12 小时制，带 AM/PM 表示的当前时间
- `\A` 24 小时制 `hours/minutes` 格式
- `\u` 当前用户名
- `\v` shell 程序的版本号
- `\V` shell 版本的发布号
- `\w` 当前工作目录名
- `\W` 当前工作目录名最后部分
- `\!` 当前命令历史号
- `\#` 当前 shell 会话中的命令数
- `\$` 显示 \$ 符号
- `\[`、`\]` 两者配合使用，用于嵌入非打印的控制字符

ANSI 转义编码以一个八进制 033 开头的转义字符开始后接可选的字符属性，然后是一个指令。

| 序列       | 文本颜色 | 序列       | 文本颜色 |
| ---------- | -------- | ---------- | -------- |
| \033[0;30m | 黑色     | \033[1;30m | 深灰色   |
| \033[0;31m | 红色     | \033[1;31m | 浅红色   |
| \033[0;32m | 绿色     | \033[1;32m | 浅绿色   |
| \033[0;33m | 棕色     | \033[1;33m | 黄色     |
| \033[0;34m | 蓝色     | \033[1;34m | 浅蓝色   |
| \033[0;35m | 粉红     | \033[1;35m | 浅粉色   |
| \033[0;36m | 青色     | \033[1;36m | 浅青色   |
| \033[0;37m | 浅灰色   | \033[1;37m | 白色     |

例子：`PS1='\[\033[0;31m\]<\u@\h \W>\$\[\033[0m\]'`，先变红色，然后重置为黑色

| 序列       | 背景颜色 | 序列       | 背景颜色 |
| ---------- | -------- | ---------- | -------- |
| \033[0;40m | 蓝色     | \033[1;44m | 黑色     |
| \033[0;41m | 红色     | \033[1;45m | 紫色     |
| \033[0;42m | 绿色     | \033[1;46m | 青色     |
| \033[0;43m | 棕色     | \033[1;47m | 浅灰色   |
