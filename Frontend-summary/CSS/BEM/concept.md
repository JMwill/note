# BEM 概念记录

## 基础概念

### 块（Block）

块的概念，在我的理解里是指模块，像编程里的模块那样，BEM 中的模块也是独立的存在，同时本身不应该对自身以外的范围造成影响，所以在 CSS 上则体现为不应该具有 `margin` 等属性。这个盒子可以包含所有模块独有的元素（Element）或者是其他独立的模块。这样子，模块就可以达到复用的目的。

比如：`.menu`

### 元素（Element）

元素，依赖于模块而存在，这个元素的概念可以类比为编程上的局部函数，模块内肯定有只有本模块才能用到的部分，就像编程里面的局部函数一样，因为 CSS 没有局部样式这个说法，所以只能够通过 BEM 中的这种方式来定义从命名上规定局部部分。而因为元素是局部的，所以元素本身不可以独立于模块而存在不能够单独进行使用。

但是元素跟编程里面的局部函数的区别是，局部函数可以包含任意多的局部函数，也可以是其他局部函数的组成部分，而元素在 BEM 中是通过命名来进行限定的，层级一旦过多则会造成混乱，同时嵌套的命名包含也一样会造成混乱，所以，BEM 中规定元素只能是单独的一层，这样就可以避免多重元素命名混乱。

而且像一般的编程那样，模块不一定需要局部函数，元素也并不一定会存在于模块中。这个是需要注意的一个部分。

比如：`.menu__item`

### 修饰符（Modifier）

修饰符，顾名思义，用于修饰模块或者是元素的。之所以会有修饰符是因为 CSS 作为表现层，常常需要实现额外的效果，或者需要对某部分进行额外的变更，或者是颜色，或者是表现形态。这个时候如果额外起一个模块名或者元素都会造成浪费，因为无论是模块也好，元素也好，都是作为构建页面的材料而存在的，也就是扮演砖头、木材的角色。

修饰符类比于编程就像是装饰器一样，纯粹是为了增加某些功能，修饰而存在。也就是油漆，墙纸一类的角色。所以修饰符一定是依赖模块以及元素存在的，在 BEM 中也就是一定要有元素的类名，才能够出现修饰符的类名，否则没有了砖头，怎么有墙来油油漆？

还有一个关于修饰符的点是，修饰符还可以具有 **修饰值**，这个可以当作是更具体的修饰器，就像是油油漆的时候指明这个油漆的牌子，或者是颜色。提供更丰富更具有含义的修饰。

比如：`.menu_big`，以及 `.menu_theme_christmas`

### 混合（Mix）

混合的概念可以看作是用两个模块处理同一堆数据，得到经过两者处理后的结果。在 CSS 上的体现则是兼有两个模块的特性。可以想象是一块贴了瓷砖的砖块。

比如：`.menu > .menu__item .search-form`

## 命名规则

`block-name__elem-name_mod-name_mod-val`

- 名字用小写拉丁字母
- 字与字之间用 `-` 分隔
- 块级名称为元素以及修饰符定义命名空间
- 元素与块之间用两个下划线分隔 `__`
- 修饰符与块或者元素之间用单个下划线分隔 `_`
- 修饰符与修饰值之间用单个下划线分隔 `_`
- 对于布尔值修饰符值并不用包含在名称中

以上是一般的 BEM 命名规则，对于 MVVM 等框架而言，因为已有模块的概念，所以可以将命名方式调整为：`BlockName-ElemName-modName-modVal`

## CSS

需不需要 wrapper？CSS 中，wrapper 的作用通常是用来定位 HTML 元素之间的位置或者是定位区域中多个元素的位置。而这些情况再 BEM 中可以通过 `mixes` 的方法或者是一个额外的 BEM 元素来解决，并不需要使用一个额外的抽象无意义 wrapper

对于与其他元素进行位置确定的一般使用 `mixes` 的方式，而定位多个元素的话则新建立一个 BEM 元素

### 选择器

BEM 中，使用的都是 `class` 选择器。其中：

- 不推荐，严格点来说不允许将 `tag` 与 `class` 一起使用：`button.button`。
- 可以使用嵌套的类选择器，但是要克制，避免过多的嵌套。只在两者有必要嵌套的时候再进行使用：`.button_hovered .button__text`。
- 多个类叠加加强限定的方式也是不允许的 `.button.button_theme_islands {}`

### Mixes

Mixes 允许我们：

- 在多个实体中组合行为以及样式而不用产生重复的代码
- 在不同的 HTML 元素中应用相同的样式

适合使用 Mixes 的情况有：

#### 需要设置外部的几何形状以及位置时

例子：

```html
<!-- header block -->
<header class="header">
  <button class="button header__button">...</button>
</header>
```

设置 Header 块的按钮样式

```css
.button {
  font-family: Arial;
  text-align: center;
  border: 1px solid black;
}

.header__button {
  margin: 30px;
  position: relative;
}
```

而因为跟 button 定位相关的样式都以 header 内的一个元素 `.header__button` 的方式来定义，因此 button 这个块可以应用到其他的地方而不会有别的影响

```html
<!-- footer block -->
<footer class="footer">
  <button class="button">...</button>
</footer>
```

#### 块的样式组

在需要应用相同的样式到多个不同的 HTML 样式中时就可以使用 **组选择器**：`article， .footer div`。但是组选择器会使得 CSS 代码的耦合度变高。因此这里可以使用 Mixes 创建一个额外的块（Block）来达到共享相同样式的目的。

#### 单一职责原则

跟面向对象编程一样，BEM 对 CSS 而言也应该要符合单一职责原则，单个块的 CSS 所负责的也应该是单一的目的，不要既进行结构的构造，又定义几何位置。

#### 开放/封闭原则

这个原则说的是元素对于 **修饰符** 应该是开放的，但是对于直接的修改应该是封闭的，比如当需要重新定义某个按钮的字体、行高的时候，可以通过添加一个 **修饰符** 来实现，而不是利用上下文来进行修改：`.context .button`，这样的方式。
