# 享元模式

享元模式是一种用于性能优化的模式，核心是运用共享技术来有效支持大量细粒度的对象

如果系统中因为创建了大量类似的对象而导致内存占用过高，享元模式此时就能派上用场了。

***

享元模式要求将对象的属性划分为内部状态与外部状态（状态在这里通常指属性）。享元模式的目标是尽量减少共享对象的数量。

划分内部状态于外部状态的经验：
- 内部状态存储于对象内部
- 内部状态可以被一些对象共享
- 内部状态独立于具体的场景，通常不会改变
- 外部状态取决于具体的场景，并根据场景而变化，外部状态不能被共享

通常来说内部状态有多少种组合，系统便**最多**存在多少个对象。

***

## 享元模式的适用性

有以下情况发生时可以使用享元模式：
- 一个程序中使用了大量的相似对象
- 由于使用了大量对象，造成很大的内存开销
- 对象的大多数状态都可以变为外部状态
- 剥离出对象的外部状态之后，可以用相对较少的共享对象取代大量对象

如果没有外部状态的分离，及时使用了共享的技术，但并不是一个纯粹的享元模式

***

对象池技术是另外一种性能优化方案，跟享元模式有一些相似之处，但是没有分离内部状态和外部状态这个过程，享元模式有时也可以用对象池 + 事件委托来替代实现。

