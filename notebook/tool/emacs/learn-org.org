#+STARTUP: indent
#+TITLE: org-mode 学习记录

* 模式设置

对单个文件设置 org 文件打开时显示模式：#+STARTUP:content

可选项有：overview、contents、showall

显示所有并包括 drawers 的快捷键是：C-u C-u C-u <TAB>

* 移动方式

都需要用 C-c 开头

| 后接快捷键 | 含义                             |
|------------+----------------------------------|
| C-p        | 上个标题，类比普通 C-p 含义记忆  |
| C-n        | 下个标题                         |
| C-f        | 下个同级标题，相当于下一个的意思 |
| C-b        | 上个同级标题                     |
| C-u        | 回到上层标题                     |
| C-w        | 将条目或者区域传送到另一个文件中 |

* 结构编辑

编辑的时候需要用到，快速帮助插入

| 按键           | 功能                             |
|----------------+----------------------------------|
| M-<Return>     | 插入同级标题；                   |
|                | 列表则插入新的项；               |
|                | 在一行中间则断行后面的字变成标题 |
|----------------+----------------------------------|
| M-S-<Return>   | 插入与标题同级的 TODO 项         |
| M-<UP/DOWN>    | 条目上下移动位置                 |
| M-<LEFT/RIGHT> | 条目等级提升/降低                |
| C-x n s/w      | 将视图局限在当前子树中/放宽视图  |

* 构造稀疏树

| 按键    | 含义                                        |
|---------+---------------------------------------------|
| C-c /   | 根据后续选择的类型创建稀疏树                |
| C-c / r | 根据后续输入的匹配串来显示稀疏树；          |
|         | 所有匹配项都高亮显示，通过 C-c C-c 取消高亮 |

* 文本列表

列表分有序、无序、描述三种

- 无序列表项以：'-'、'+'、'*' 开头
- 有序以 '1.'、'1)' 等开头
- 描述列表用 '::' 将项与描述分开

插入新项，与移动等操作跟标题的结构编辑时一样

新增的功能有复选框：'[ ]'，快捷键 ctrl-c ctrl-c 改变复选框状态

改变列表项标志符号：ctrl-c -

* 注脚

当需要注脚时，可以通过快捷键：ctrl-c ctrl-x f 快速创建，这个快捷键当注脚已经存在时则会在定义与引用间转跳

在注脚间转跳则可以用：ctrl-c ctrl-c

* 表格

对表格操作：
1. 当前行下面添加水平线：c-c -
2. 当前行下面添加水平线并移到下一行：c-c <Return>
3. 将表格排序：c-c ^


* 超链接

超链接的形式： =[[link][description]]= ，简单显示可点击链接则： =[[link]]=

而想要在不修改链接显示形式的情况下修改链接则可以输入：c-c c-l

想要链接文档内的某个位置则可输入： =[[#custom-id]]= 来实现

打开链接则可以通过：c-c c-o 实现

而 c-c % 用于记录位置，通过 c-c & 返回到记录的位置

链接后面加上双冒号可以表示特定位置： =file:~/code/main.c::255= 或者 =file:~/xx.org::My Target=

* 待办事项

用于标题，常用的命令有：

| 快捷键       | 含义                           |
|--------------+--------------------------------|
| c-c c-t      | 待办事项状态间切换             |
| s-left/right | 选择上/下一个状态              |
| c-c t        | 稀疏树中显示 TODO 项，其余折叠 |
| c-c c-d      | 插入 DEADLINE 的日期           |


要想拥有多种关键字的 TODO 则可以通过增加：org-todo-keywords 来实现

或者定义只在一个文件中生效的 TODO 关键字： =#+TODO: REPORT(r) BUG(b) | FIXED(f)= 括号内字母后加入 =!= 或者 =@= 就表明要作记录。\\
写完定义后需要在这行上面执行 c-c c-c 来让设置生效， =!= 是作时间记录， =@= 则是作文字记录，两者可同时用

每个标题可以作为待办事项，当需要任务细分并想知道任务执行情况是，可以在主项后添加 =[/]= 或者 =[%]= 则在每一项 TODO 完成时，进度都会自动修改

TODO 项还可以跟复选框列表一起使用

* 标签

标题可以用标签来提供更多相关信息，只需要在标题后输入用冒号包裹的关键字即可 =:tag:=

多个标签用冒号分隔 =:tag1:tag2:=

标签一旦建立完成，通过 c-c \ 可以对标签进行搜索

* 日期时间

时间分为激活时间与非激活时间，还可以用两个时间组成一个时间段

具体设置方式如下：

| 快捷键       | 含义                                                   |
|--------------+--------------------------------------------------------|
| c-c .        | 询问设置的日期，当光标原处于一个时间上时是修改时间     |
|              | 否则插入一个新时间。用两次则插入一个时间段             |
|--------------+--------------------------------------------------------|
| c-c !        | 插入未激活时间戳                                       |
| s-lfet/right | 修改时间戳前进/后退一天                                |
| s-up/down    | 在年/月/日上则增加减少一个单位，在括号上则改变激活状态 |
| c-c c-d      | 标题下方插入带有 DEADLINE 关键字的时间戳               |
| c-c c-s      | 标题下方插入 SCHEDULED 关键字的时间戳                  |


当时间戳包含有时间间隔时表明事件每隔一个特定时间段后重复发生：天（d）、周（w）、月（m）、年（y）。\\
如： =* Pick up Sam at school <2007-05-16 Wed 12:30 +1w>= 表示每周二显示

** 记录工作时间

用于记录在一个工程中花在某些特定任务上的时间

| 快捷键      | 含义                                                          |
|-------------+---------------------------------------------------------------|
| c-c c-x c-i | 开始计时，再加上 c-u 前缀则从当前已计时任务中选择任务         |
| c-c c-x c-o | 停止计时，并插入所用时间                                      |
| c-c c-x c-e | 更新当前计时任务进度                                          |
| c-c c-x c-x | 取消当前计时                                                  |
| c-c c-x c-j | 转跳到当前正在运行的计时任务条目，用 c-u 前缀从当前任务中选择 |
| c-c c-x c-r | 插入表格型计时报告动态块                                      |
| c-c c-c     | 更新表格动态块，需要在 =#+BEGIN= 这行上                       |


* 捕获--转发--存档

输入指令： =org-capture= 来捕获一个任务，同时可以定义好不同的模版来做不同的捕获笔记，并保存到不同地方。\\
默认是保存到用户目录下的 =.notes= 中

=捕获--转发= 想要达到效果都需要一些设置，这里暂时不管

** 归档

| 快捷键      | 含义               |
|-------------+--------------------|
| c-c c-x c-a | 归档当前项         |
| c-c c-x c-s | 将光标处的子树归档 |

默认归档的地方是当前文件目录下文件名 + "_archive" 结尾

可通过设置： =#+ARCHIVE: %s_done::= 这种形式修改文件名

* 议程视图

简单说，议程视图就是将多个文件中的内容集中在一起，然后按特定类型显示所需要的内容，方便查看与转跳到对应文件中。十分适合查看工作安排

| 快捷键 | 含义                           |
|--------+--------------------------------|
| c-c [  | 将当前文件加入到议程文件列表中 |
| c-c ]  | 将当前文件从议程文件列表中删除 |

** 进入议程调度器

输入命令：org-agenda。通过选择对应选项查看不同形式的议程

在用标签显示议程时，可以通过匹配语法进行标签的过滤简单的有： =+-|&= ，分别代表包含、删去、或、与

- "+work-bos" :: 选择标标 ":work:" 的标题，但去掉同时标有 ":boss:" 的标签
- "work|laptop" :: 选择标有 ":work:" 或者 ":laptop:" 的行


** 议程缓冲区命令

- 移动

| 快捷键 | 含义           |
|--------+----------------|
| n      | 下一行；同 c-n |
| p      | 上一行；同 c-p |

- 查看文件

| 快捷键   | 含义                               |
|----------+------------------------------------|
| <Space>  | 在新窗口中显示条目源位置           |
| <Tab>    | 在新窗口中打开源文件并转到对应位置 |
| <Return> | 转到条目位置并删除其他窗口         |

- 改变显示方式

| 快捷键 | 含义                                               |
|--------+----------------------------------------------------|
| o      | 删除其他窗口相当于：ctrl-x 1                       |
| d/w    | 切换到日/周视图                                    |
| f/b    | 前移/后移当前视图类型单位数                        |
| .      | 转到今天的位置                                     |
| j      | 询问日期并转到那天                                 |
| l      | 触发日志模式                                       |
| r/g    | 重新构造议程，更新状态                             |
| s      | 保存当前 Emacs 会话中所有的 org 缓冲区和 ID 的地址 |

- 二级筛选和查询编辑

| 快捷键 | 含义                         |
|--------+------------------------------|
| =/=    | 根据标签过滤当前缓冲区       |
| =\=    | 通过增加条件缩小当前议程视图 |

- 远程编辑

| 快捷键       | 含义                                       |
|--------------+--------------------------------------------|
| t            | 修改议程和 org 文件中的条目的 TODO 状态    |
| c-k          | 删除当前的议程条目以及源文件中它的整个子树 |
| a            | 归档条目对应的整个树                       |
| =$=          | 归档当前标题对应的树                       |
| c-c c-s      | 规划一个条目                               |
| c-c c-d      | 设置条目截止期限                           |
| s-left/right | 改变当前行的时间戳                         |
| I            | 当前条目开始计时                           |
| O/X          | 暂停/取消最近计时                          |

* 导出前的设置

| 设置项                             | 含义                                      | 例子                                                |
|------------------------------------+-------------------------------------------+-----------------------------------------------------|
| ~#+TITLE~                          | 导出文件的标题                            | =#+TITLE: title=                                    |
| ~#+OPTIONS: toc:~                  | 设置目录显示形式                          | =#+OPTIONS: toc:2=                                  |
| ~#+BEGIN_VERSE ... #+END_VERSE~    | 按照输入格式显示文本                      | =#+BEGIN_VERSE paragraph #+END_VERSE=               |
| =#+BEGIN_QUOTE ... ~=              | 输入段落引用，两边带缩进                  | =~=                                                 |
| =#+BEGIN_CENTER ... ~=             | 文本居中显示                              | =~=                                                 |
| =#+BEGIN_COMMENT ... ~=            | 段落型注释                                | =~=                                                 |
|------------------------------------+-------------------------------------------+-----------------------------------------------------|
| =#+BEGIN_EXAMPLE ... ~=            | 输入纯文本例子，适用于代码等              | =~=                                                 |
|                                    | 可以在一行的开头用冒号 : 表示行式例子     |                                                     |
|------------------------------------+-------------------------------------------+-----------------------------------------------------|
| =#+BEGIN_SRC [src type] ... ~=     | 输入程序设计语言源代码                    | =~=                                                 |
| =#+RESULTS:=                       | 给出代码运行结果，结合 =#+BEGIN_SRC= 使用 | 在 =#+BEGIN_SRC= 上按两次 =ctrl-c= 可得代码运行结果 |
| =#+CAPTION=                        | 表格标题                                  | =#+CAPTION: table title=                            |
| =#+LABEL: tbl:basic-data=          | 表格标签                                  | =#+LABEL: tbl:basic-data=                           |
| =#+INCLUDE: "file-path" var2 var3= | 包含文件内容                              | =#+INCLUDE: "~/.filepath" src emacs-lisp=           |
|                                    |                                           | var2、var3 是用来表示组织方式的，可选。             |

另外，如果一个子树以关键字 =COMMENT= 开头则整个子树都不会被导出，快捷键是： =ctrl-c ;= ，需要在标题上才有效果

文本显示模式：

- 粗体: ~*粗体*~
- 斜体: ~/斜体/~
- 下划线: ~_下划线_~
- 代码: =~代码~=
- 删除线: ~+删除线+~
- 纯文本: ~=纯文本=~


* 补充

通过 ~m-<Tab>~ 可以在 org 文件内提供补全功能

另外，想要让大纲视图更清晰，可以设置 org-startup-indented 来打开 indent 模式或者用： =#+STARTUP: indent= 设置

另外 Org 含有一个发布系统；还有可以抽取源代码的功能。可以进一步阅读手册获知。
