# 调试JavaScript

## 通过事件监听断点

在Source面板中, 通过在`Event Listener Breakpoints`中选择需要监听的类型, 能够在某种事件触发时进行断点. 通过`F11`单行代码执行以及`F10`跳过函数来进行单步调试来发现代码错误的地方.

在通过查看执行过程找到里面的错误函数之后, 可以在相应有以疑问的地方处设置另一个断点. 还可以通过与`Event Listener Breakpoints`同一级的`Watch`处加入一个监听表达式来监视变量随时间变化的情况. 或者通过`ESC`调出控制台面板来执行表达式验证想法. 并可在想法验证后直接在`Source`面板显示的代码处修改表达式后`Ctrl+s`保存到DevTools处, 重新执行验证猜想.

在手动设置断点时, 可以在设置处右键添加有条件的断点, 在符合输入的表达式条件的情况下才会触发断点. 除了在对应的代码行点击断点, 还可以在源代码里面加入`debugger`进行断点的设置.

对DOM树修改设置断点进行监听, 可以在DOM节点上右键在`Break on`中选择相应的断点类型.

需要监听异常发生的时候, 可以在`Sources`面板上点击暂停断点旁边的`Pause on exceptions`可以在异常发生的时候进入中断. 来进行错误的排除.

在source面板中还可以找到中断XHR的地方, 没有输入的话则监听所有的XHR. 否则监听具有特定字符的XHR请求.

直接在代码中可以使用的调试语句有:

- `debugger`操作符
- `debug()`方法

在对较长的代码进行调试时, 如果想要略过某些行, 可以在中断之后在感兴趣的代码行处右键点击`Continue to Here`,

想要在断点的时候重新执行某个函数, 可以在`Source`面板下的`Call Stack`处选择想要重新执行的堆栈处右键选择`Restart Frame`.

在设置了多个断点之后, 想要让程序一直执行, 而不会再在遇到断点的时候暂停可以在跳过中断的按钮上长按, 选择下方的按钮来强制忽略后续的中断.

在Source面板的作用域区域处, 可以查看各个作用域下的变量, 并可双击修改对应的变量.

**跳过黑盒代码**. 在调试时, 有时会在代码中遇到第三方库的调用, 这些第三方库一般情况下是值得我们信任的, 这时可以在第三方库文件上右键选择`Blackbox Script`这样, 调试时就不会进入这个文件. 除了可以在`Source`面板中的编辑器区域设置外, 还可以在`Call Stack pane`处选择相应的堆栈来设置相应的文件为黑盒代码, 或者在`Settings`里面选择`Blackboxing`的tab在里面添加匹配黑盒代码的模式.

对于常用的代码片段, 还可以在`Srouce`面板处的左侧panel中, 选择`Snippets panel`, 新建一个代码段, 需要的时候右键执行代码就好. 代码段的修改还会存有历史, 能够回退到需要的版本.